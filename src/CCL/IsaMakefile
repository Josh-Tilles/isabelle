#
# $Id$
#
# IsaMakefile for CCL
#

OUT = $(ISABELLE_OUTPUT)
LOG = $(OUT)/log

SET_FILES = ROOT.ML Set.thy Set.ML subset.ML equalities.ML mono.ML \
	    Gfp.thy Gfp.ML Lfp.thy Lfp.ML

CCL_FILES = CCL.thy CCL.ML Term.thy Term.ML Type.thy Type.ML \
	    coinduction.ML Hered.thy Hered.ML Trancl.thy Trancl.ML \
	    Wfd.thy Wfd.ML genrec.ML typecheck.ML eval.ML Fix.thy Fix.ML

EX_FILES = ex/ROOT.ML ex/Flag.ML ex/Flag.thy ex/List.ML ex/List.thy \
	   ex/Nat.ML ex/Nat.thy ex/Stream.ML ex/Stream.thy


$(OUT)/CCL: $(OUT)/FOL $(SET_FILES) $(CCL_FILES)
	@$(ISATOOL) usedir -b $(OUT)/FOL CCL

$(OUT)/FOL:
	@cd ../FOL; $(ISATOOL) make

$(LOG)/CCL-ex.gz: ex/ROOT.ML $(OUT)/CCL $(EX_FILES)
	@$(ISATOOL) usedir $(OUT)/CCL ex

test: $(OUT)/CCL $(LOG)/CCL-ex.gz

clean:
	@rm -f $(OUT)/CCL $(LOG)/CCL-ex.gz


.PRECIOUS: $(OUT)/FOL $(OUT)/CCL
