#
# $Id$
#
# IsaMakefile for CCL
#

## targets

default: CCL
images: CCL
test: CCL-ex
all: images test


## global settings

SRC = $(ISABELLE_HOME)/src
OUT = $(ISABELLE_OUTPUT)
LOG = $(OUT)/log


## CCL

CCL: FOL $(OUT)/CCL

FOL:
	@cd $(SRC)/FOL; $(ISATOOL) make FOL

$(OUT)/CCL: $(OUT)/FOL CCL.ML CCL.thy Fix.ML Fix.thy Gfp.ML Gfp.thy \
  Hered.ML Hered.thy Lfp.ML Lfp.thy ROOT.ML Set.ML Set.thy Term.ML \
  Term.thy Trancl.ML Trancl.thy Type.ML Type.thy Wfd.ML Wfd.thy \
  coinduction.ML equalities.ML eval.ML genrec.ML mono.ML subset.ML \
  typecheck.ML
	@$(ISATOOL) usedir -b $(OUT)/FOL CCL


## CCL-ex

CCL-ex: CCL $(LOG)/CCL-ex.gz

$(LOG)/CCL-ex.gz: $(OUT)/CCL ex/Flag.ML ex/Flag.thy ex/List.ML \
  ex/List.thy ex/Nat.ML ex/Nat.thy ex/ROOT.ML ex/Stream.ML ex/Stream.thy
	@$(ISATOOL) usedir $(OUT)/CCL ex


## clean

clean:
	@rm -f $(OUT)/CCL $(LOG)/CCL.gz $(LOG)/CCL-ex.gz
